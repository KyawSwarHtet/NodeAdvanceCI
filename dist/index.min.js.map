{"version":3,"sources":["index.js"],"names":["express","require","mongoose","passport","keys","bodyParser","Promise","global","connect","mongoURI","useUnifiedTopology","app","json","use","useNewUrlParser","initialize","maxAge","process","env","NODE_ENV","session","path","get","req","res","sendFile","resolve","PORT","listen","console","log"],"mappings":"aAAA,IAAMA,QAAUC,QAAQ,WAClBC,SAAWD,QAAQ,YADnBD,cAAkBC,QAAA,kBAGlBE,SAAWF,QAAQ,YAFnBC,WAAWD,QAAQ,eAInBG,KAAOH,QAAQ,iBAErBA,QAAQ,iBAJRA,QAAME,iBAMNF,QAAQ,uBALRA,QAAMI,oBACNH,SAAUI,QAAWC,OAAAD,QAQrBJ,SAASM,QAAQJ,KAAKK,SAAU,CANhCR,iBAAQ,EAQNS,oBAAoB,IANtBT,IAAAA,IAAQD,UAkBRW,GAjBAV,IAAAA,IAAQI,WAAAO,QAWRD,IAAIE,IATJX,cAAA,CACAA,OAASM,OACPM,KAAAA,CAAAA,KAAAA,cAIFH,IAAMA,IAAGR,SAAUY,cAEnBJ,IAAIE,IAAIR,SAAAA,WAGJW,QAAM,sBAANA,CAA4BL,KAC5BP,QAAM,sBAANA,CAAMO,KAGNE,CAAAA,cAAaE,SAATE,QAARC,IAAAC,UAAA,CACAR,IAAIE,IAAIV,QAASiB,OAAT,iBAERnB,IAAQoB,KAAApB,QAAA,QAONU,IAAIW,IAAI,IAAK,SAACC,EAAKC,GANrBvB,EAAQwB,SAAAJ,KAAAK,QAAR,SAAA,QAAA,iBAWA,IAAMC,KAAOV,QAAQC,IAAIS,MAAQ,IAN/BhB,IAAAiB,OAAUD,KAAG1B,WAQb4B,QAAQC,IAAR,oBAAiCH","file":"index.min.js","sourcesContent":["const express = require(\"express\");\r\nconst mongoose = require(\"mongoose\");\r\nconst cookieSession = require(\"cookie-session\");\r\nconst passport = require(\"passport\");\r\nconst bodyParser = require(\"body-parser\");\r\nconst keys = require(\"./config/keys\");\r\n\r\nrequire(\"./models/User\");\r\nrequire(\"./models/Blog\");\r\nrequire(\"./services/passport\");\r\nrequire(\"./services/cache\");\r\n\r\nmongoose.Promise = global.Promise;\r\nmongoose.connect(keys.mongoURI, {\r\n  useNewUrlParser: true,\r\n  useUnifiedTopology: true,\r\n});\r\n\r\nconst app = express();\r\n\r\napp.use(bodyParser.json());\r\napp.use(\r\n  cookieSession({\r\n    maxAge: 30 * 24 * 60 * 60 * 1000,\r\n    keys: [keys.cookieKey],\r\n  })\r\n);\r\napp.use(passport.initialize());\r\napp.use(passport.session());\r\n\r\nrequire(\"./routes/authRoutes\")(app);\r\nrequire(\"./routes/blogRoutes\")(app);\r\n\r\nif ([\"production\"].includes(process.env.NODE_ENV)) {\r\n  app.use(express.static(\"client/build\"));\r\n\r\n  const path = require(\"path\");\r\n  app.get(\"*\", (req, res) => {\r\n    res.sendFile(path.resolve(\"client\", \"build\", \"index.html\"));\r\n  });\r\n}\r\n\r\nconst PORT = process.env.PORT || 5000;\r\napp.listen(PORT, () => {\r\n  console.log(`Listening on port`, PORT);\r\n});\r\n"]}